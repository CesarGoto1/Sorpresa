<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jardín de Tulipanes</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at center, #1a1a2e, #16213e, #0f0f23);
            overflow: hidden;
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(ellipse at center bottom, #2a2a4e 0%, #1a1a2e 50%, #0f0f23 100%);
        }
        
        .mensaje {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 102, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            opacity: 0;
            animation: aparecerMensaje 3s ease-out 5s forwards;
            max-width: 90vw;
        }
        
        .mensaje h2 {
            color: #ffff99;
            font-family: 'Georgia', serif;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 255, 102, 0.8);
            line-height: 1.3;
        }
        
        .mensaje p {
            color: #ffffff;
            font-family: 'Georgia', serif;
            font-size: clamp(1rem, 3vw, 1.3rem);
            line-height: 1.6;
            margin: 0;
        }
        
        .corazon {
            color: #ff6b9d;
            font-size: 1.5em;
            animation: latido 2s ease-in-out infinite;
        }
        
        @keyframes aparecerMensaje {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        @keyframes latido {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .boton-musica {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            padding: 12px 20px !important;
            background: linear-gradient(45deg, #ffff99, #ffdd33) !important;
            border: none !important;
            border-radius: 25px !important;
            cursor: pointer !important;
            z-index: 1000 !important;
            font-weight: bold !important;
            font-size: 14px !important;
            color: #333 !important;
            box-shadow: 0 5px 15px rgba(255, 255, 102, 0.4) !important;
            transition: all 0.3s ease !important;
            touch-action: manipulation !important;
            min-height: 44px !important;
        }
        
        .boton-musica:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 20px rgba(255, 255, 102, 0.6) !important;
        }
        
        @media (max-width: 768px) {
            .mensaje {
                padding: 25px 30px;
                margin: 0 15px;
            }
            
            .boton-musica {
                top: 15px !important;
                right: 15px !important;
                padding: 10px 16px !important;
                font-size: 12px !important;
                min-height: 40px !important;
            }
        }
        
        @media (max-width: 480px) {
            .mensaje {
                padding: 20px 25px;
                margin: 0 10px;
            }
            
            .boton-musica {
                top: 10px !important;
                right: 10px !important;
                padding: 8px 14px !important;
                font-size: 11px !important;
            }
        }
        
        @media (max-height: 500px) and (orientation: landscape) {
            .mensaje {
                padding: 15px 25px;
                top: 45%;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="mensaje">
        <h2>Para Ti</h2>
        <p>Estas flores son para ti,<br>
        amarillas como las estrellas,<br>
        tan bonitas como tú <span class="corazon">♥</span></p>
    </div>
    <audio id="musicaFondo" loop>
        <source src="Carla Morrison - Disfruto (letra).mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let animationFrame = 0;
        
        function ajustarCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        function configurarFlores() {
            const canvasWidth = canvas.width;
            const canvasHeight = canvas.height;
            const isMobile = window.innerWidth <= 768;
            const isSmallScreen = window.innerWidth <= 480;
            const numFlores = isMobile ? 3 : 5;
            
            const flores = [];
            
            let escalaBase;
            if (isSmallScreen) {
                escalaBase = Math.min(canvasWidth, canvasHeight) / 600;
            } else if (isMobile) {
                escalaBase = Math.min(canvasWidth, canvasHeight) / 500;
            } else {
                escalaBase = Math.min(canvasWidth, canvasHeight) / 400;
            }
            
            escalaBase = Math.max(0.4, Math.min(escalaBase, 1.2));
            
            const margen = canvasWidth * 0.1;
            const espacioDisponible = canvasWidth - (2 * margen);
            const spacing = espacioDisponible / (numFlores + 1);
            
            const escalasAleatorias = [];
            
            for (let i = 0; i < numFlores; i++) {
                const variacion = 0.3 + Math.random() * 0.4;
                escalasAleatorias.push(escalaBase * variacion);
            }
            
            for (let i = escalasAleatorias.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [escalasAleatorias[i], escalasAleatorias[j]] = [escalasAleatorias[j], escalasAleatorias[i]];
            }
            
            for (let i = 0; i < numFlores; i++) {
                const x = margen + spacing * (i + 1);
                
                flores.push({
                    x: x,
                    delay: i * 30 + Math.random() * 20,
                    color: '#ffff99',
                    scale: escalasAleatorias[i],
                    swaySpeed: 0.04 + Math.random() * 0.02
                });
            }
            
            return flores;
        }
        
        let flores = [];
        
        function limpiarCanvas() {
            const gradient = ctx.createRadialGradient(canvas.width/2, canvas.height, 0, canvas.width/2, canvas.height/2, canvas.width/2);
            gradient.addColorStop(0, 'rgba(42, 42, 78, 0.8)');
            gradient.addColorStop(0.5, 'rgba(26, 26, 46, 0.9)');
            gradient.addColorStop(1, 'rgba(15, 15, 35, 1)');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        function dibujarEstrellas() {
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            const numEstrellas = Math.floor(canvas.width / 60);
            
            const estrellas = [];
            for (let i = 0; i < numEstrellas; i++) {
                estrellas.push({
                    x: (canvas.width / numEstrellas) * i + Math.random() * (canvas.width / numEstrellas),
                    y: Math.random() * (canvas.height * 0.6)
                });
            }
            
            estrellas.forEach(estrella => {
                const brillo = 0.4 + 0.6 * Math.sin(animationFrame * 0.08 + estrella.x);
                ctx.globalAlpha = brillo;
                ctx.beginPath();
                ctx.arc(estrella.x, estrella.y, 1.5, 0, 2 * Math.PI);
                ctx.fill();
            });
            ctx.globalAlpha = 1;
        }
        
        function dibujarSuelo() {
            const sueloHeight = canvas.height * 0.15;
            const gradient = ctx.createLinearGradient(0, canvas.height - sueloHeight, 0, canvas.height);
            gradient.addColorStop(0, '#4d7b3a');
            gradient.addColorStop(0.3, '#3d6b2a');
            gradient.addColorStop(0.7, '#2d5016');
            gradient.addColorStop(1, '#1a2f0a');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, canvas.height - sueloHeight, canvas.width, sueloHeight);
            
            ctx.strokeStyle = '#4a7c2f';
            ctx.lineWidth = 1.5;
            const spacing = Math.max(8, canvas.width / 100);
            
            for (let i = 10; i < canvas.width; i += spacing) {
                const altura = 6 + Math.sin(animationFrame * 0.04 + i * 0.1) * 4;
                ctx.globalAlpha = 0.4 + 0.4 * Math.sin(i * 0.2);
                ctx.beginPath();
                ctx.moveTo(i, canvas.height - sueloHeight);
                ctx.lineTo(i + Math.sin(animationFrame * 0.08 + i) * 2, canvas.height - sueloHeight - altura);
                ctx.stroke();
            }
            ctx.globalAlpha = 1;
        }
        
        function calcularCrecimiento(flor) {
            const progress = Math.max(0, (animationFrame - flor.delay) * 0.01);
            return Math.min(progress, 1);
        }
        
        function dibujarTallo(flor) {
            const growthProgress = calcularCrecimiento(flor);
            const sway = Math.sin(animationFrame * flor.swaySpeed) * 3;
            const sueloHeight = canvas.height * 0.15;
            
            const alturaMaxima = Math.min(canvas.height * 0.6, canvas.width * 0.3);
            const talloHeight = alturaMaxima * Math.min(growthProgress * 1.8, 1) * flor.scale;
            
            if (talloHeight <= 0) return;
            
            const gradientTallo = ctx.createLinearGradient(flor.x - 2, canvas.height - sueloHeight, flor.x + 2, canvas.height - sueloHeight - talloHeight);
            gradientTallo.addColorStop(0, '#3d5a2a');
            gradientTallo.addColorStop(0.5, '#4a7c35');
            gradientTallo.addColorStop(1, '#5d8f3a');
            
            ctx.strokeStyle = gradientTallo;
            ctx.lineWidth = Math.max(3, 5 * flor.scale);
            ctx.beginPath();
            ctx.moveTo(flor.x, canvas.height - sueloHeight);
            
            const segments = 12;
            for (let i = 0; i <= segments; i++) {
                const t = i / segments;
                const y = canvas.height - sueloHeight - (talloHeight * t);
                const x = flor.x + (sway * t * t * 0.6);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
        }
        
        function dibujarHojasFlor(flor) {
            const growthProgress = calcularCrecimiento(flor);
            if (growthProgress < 0.25) return;
            
            const hojasScale = Math.min((growthProgress - 0.25) * 1.8, 1) * flor.scale;
            const sway = Math.sin(animationFrame * flor.swaySpeed * 1.2) * 1;
            const sueloHeight = canvas.height * 0.15;
            const alturaHojas = Math.min(100 * flor.scale, canvas.height * 0.15);
            
            ctx.save();
            ctx.translate(flor.x - 18 * flor.scale + sway * 0.5, canvas.height - sueloHeight - alturaHojas);
            ctx.scale(hojasScale, hojasScale);
            ctx.rotate(Math.sin(animationFrame * 0.05) * 0.03 - 0.3);
            
            const gradientHoja1 = ctx.createLinearGradient(-10, -50, 10, 50);
            gradientHoja1.addColorStop(0, '#7db83a');
            gradientHoja1.addColorStop(0.3, '#6ba83a');
            gradientHoja1.addColorStop(0.7, '#5d8f3a');
            gradientHoja1.addColorStop(1, '#4a7c2f');
            ctx.fillStyle = gradientHoja1;
            
            ctx.beginPath();
            ctx.moveTo(0, 50);
            ctx.quadraticCurveTo(-8, 25, -5, 0);
            ctx.quadraticCurveTo(-4, -25, 0, -50);
            ctx.quadraticCurveTo(4, -25, 5, 0);
            ctx.quadraticCurveTo(8, 25, 0, 50);
            ctx.fill();
            ctx.restore();
            
            ctx.save();
            ctx.translate(flor.x + 18 * flor.scale - sway * 0.5, canvas.height - sueloHeight - alturaHojas * 0.9);
            ctx.scale(hojasScale, hojasScale);
            ctx.rotate(Math.sin(animationFrame * 0.04) * 0.03 + 0.3);
            
            ctx.fillStyle = gradientHoja1;
            ctx.beginPath();
            ctx.moveTo(0, 45);
            ctx.quadraticCurveTo(-6, 22, -5, 0);
            ctx.quadraticCurveTo(-3, -22, 0, -45);
            ctx.quadraticCurveTo(3, -22, 5, 0);
            ctx.quadraticCurveTo(6, 22, 0, 45);
            ctx.fill();
            ctx.restore();
        }
        
        function dibujarTulipanFlor(flor) {
            const growthProgress = calcularCrecimiento(flor);
            if (growthProgress < 0.5) return;
            
            const florScale = Math.min((growthProgress - 0.5) * 2, 1) * flor.scale;
            const sway = Math.sin(animationFrame * flor.swaySpeed) * 3;
            const sueloHeight = canvas.height * 0.15;
            
            const alturaFlor = Math.min(canvas.height * 0.6, canvas.width * 0.3) * flor.scale;
            const centerX = flor.x + sway;
            const centerY = canvas.height - sueloHeight - alturaFlor;
            const petalSway = Math.sin(animationFrame * 0.06) * 0.02;
            
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.scale(florScale, florScale);
            ctx.rotate(petalSway);
            
            const gradientPetal = ctx.createLinearGradient(0, -30, 0, 15);
            gradientPetal.addColorStop(0, '#ffff99');
            gradientPetal.addColorStop(0.4, '#ffdd33');
            gradientPetal.addColorStop(0.8, '#ffcc00');
            gradientPetal.addColorStop(1, '#e6b800');
            
            for (let i = 0; i < 3; i++) {
                ctx.save();
                ctx.rotate((i * Math.PI * 2 / 3) - Math.PI/6);
                ctx.fillStyle = gradientPetal;
                
                ctx.beginPath();
                ctx.moveTo(-8, 15);
                ctx.quadraticCurveTo(-15, 4, -18, -12);
                ctx.quadraticCurveTo(-12, -30, 0, -30);
                ctx.quadraticCurveTo(12, -30, 18, -12);
                ctx.quadraticCurveTo(15, 4, 8, 15);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }
            
            const gradientFrontal = ctx.createLinearGradient(0, -30, 0, 15);
            gradientFrontal.addColorStop(0, '#ffffcc');
            gradientFrontal.addColorStop(0.3, '#ffff66');
            gradientFrontal.addColorStop(0.6, '#ffdd00');
            gradientFrontal.addColorStop(1, '#ffaa00');
            
            for (let i = 0; i < 3; i++) {
                ctx.save();
                ctx.rotate((i * Math.PI * 2 / 3) + Math.PI/6);
                ctx.fillStyle = gradientFrontal;
                
                ctx.beginPath();
                ctx.moveTo(-5, 15);
                ctx.quadraticCurveTo(-12, 6, -15, -10);
                ctx.quadraticCurveTo(-10, -28, 0, -28);
                ctx.quadraticCurveTo(10, -28, 15, -10);
                ctx.quadraticCurveTo(12, 6, 5, 15);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }
            
            const gradientCentro = ctx.createRadialGradient(0, 4, 0, 0, 4, 12);
            gradientCentro.addColorStop(0, '#cc9900');
            gradientCentro.addColorStop(0.7, '#996600');
            gradientCentro.addColorStop(1, '#663300');
            
            ctx.fillStyle = gradientCentro;
            ctx.beginPath();
            ctx.ellipse(0, 6, 8, 4, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = '#8b4513';
            for (let j = 0; j < 6; j++) {
                const angle = (j * Math.PI * 2) / 6;
                const x = Math.cos(angle) * 3;
                const y = 6 + Math.sin(angle) * 1.5;
                ctx.beginPath();
                ctx.arc(x, y, 0.8, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        function dibujarParticulas() {
            ctx.fillStyle = 'rgba(255, 255, 102, 0.4)';
            const numParticulas = Math.floor(canvas.width / 80);
            
            for (let i = 0; i < numParticulas; i++) {
                const x = (canvas.width / numParticulas) * i + Math.sin(animationFrame * 0.08 + i * 1.5) * 30;
                const y = canvas.height * 0.3 + Math.cos(animationFrame * 0.06 + i * 1.5) * 40;
                const size = 0.5 + Math.sin(animationFrame * 0.12 + i) * 0.4;
                
                ctx.globalAlpha = 0.3 + 0.4 * Math.sin(animationFrame * 0.1 + i);
                ctx.beginPath();
                ctx.arc(x, y, size, 0, 2 * Math.PI);
                ctx.fill();
            }
            ctx.globalAlpha = 1;
        }
        
        function iniciarMusica() {
            const audio = document.getElementById('musicaFondo');
            audio.volume = 0.5;
            
            audio.play().catch(error => {
                console.log('No se pudo reproducir automáticamente:', error);
                const botonMusica = document.createElement('button');
                botonMusica.textContent = '🎵 Música';
                botonMusica.className = 'boton-musica';
                
                botonMusica.addEventListener('click', () => {
                    audio.play();
                    botonMusica.style.opacity = '0';
                    botonMusica.style.transform = 'translateY(-10px)';
                    setTimeout(() => botonMusica.remove(), 300);
                });
                
                document.body.appendChild(botonMusica);
            });
        }
        
        function animar() {
            animationFrame++;
            
            limpiarCanvas();
            dibujarEstrellas();
            dibujarSuelo();
            
            flores.forEach(flor => {
                dibujarTallo(flor);
                dibujarHojasFlor(flor);
                dibujarTulipanFlor(flor);
            });
            
            dibujarParticulas();
            
            requestAnimationFrame(animar);
        }
        
        function redimensionar() {
            ajustarCanvas();
            flores = configurarFlores();
        }
        
        window.addEventListener('load', () => {
            ajustarCanvas();
            flores = configurarFlores();
            iniciarMusica();
            animar();
        });
        
        window.addEventListener('resize', redimensionar);
        window.addEventListener('orientationchange', () => {
            setTimeout(redimensionar, 100);
        });
    </script>
</body>
</html>